#!/usr/bin/env bash
# Launch application or focus existing window

set -euo pipefail

CLASS_REGEX="$1"
LAUNCH_CMD="${2:-}"

# Check if window exists
window=$(hyprctl clients -j | jq -r --arg class "$CLASS_REGEX" '.[] | select(.class | test($class; "i")) | .address' | head -1)

if [[ -n "$window" ]]; then
  hyprctl dispatch focuswindow "address:$window"
else
  [[ -n "$LAUNCH_CMD" ]] && eval "$LAUNCH_CMD"
fi
