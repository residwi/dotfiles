#!/usr/bin/env bash
# Toggle night light (hyprsunset)

set -euo pipefail

ON_TEMP=4000
OFF_TEMP=6000

if ! pgrep -x hyprsunset >/dev/null; then
  hyprsunset &
  sleep 1
fi

CURRENT_TEMP=$(hyprctl hyprsunset temperature 2>/dev/null | grep -oE '[0-9]+' || echo "$OFF_TEMP")

if [[ "$CURRENT_TEMP" == "$OFF_TEMP" ]]; then
  hyprctl hyprsunset temperature $ON_TEMP
  notify-send "ğŸŒ™ Night light enabled" "Screen temperature: ${ON_TEMP}K"
else
  hyprctl hyprsunset temperature $OFF_TEMP
  notify-send "â˜€ï¸ Night light disabled" "Screen temperature: ${OFF_TEMP}K"
fi
