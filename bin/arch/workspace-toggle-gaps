#!/usr/bin/env bash
# Toggle gaps on current workspace

set -euo pipefail

ws="$(hyprctl monitors -j | jq -r '.[] | select(.focused) | .activeWorkspace.id')"
current="$(hyprctl getoption workspace_rules:"$ws":gapsout -j 2>/dev/null | jq -r '.custom // empty' || echo "")"

if [[ -z "$current" || "$current" == "null" ]]; then
    hyprctl keyword workspace w[$ws]:gapsout:0,gapsin:0
    notify-send "Gaps disabled" "Workspace $ws"
else
    hyprctl keyword workspace w[$ws]:gapsout:5,gapsin:5
    notify-send "Gaps enabled" "Workspace $ws"
fi
